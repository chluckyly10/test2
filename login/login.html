<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>请登录</title>
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css">
  <link rel="stylesheet" href="css/style.css">
  <script src="js/jQuery v3.6.0.js"></script>
</head>

<body>
  <div id="Login-box">
    <h2 style="color: #fff;">请登录</h2>
    <div class="form">
      <div class="item">
        <i class="fa fa-user-circle-o" aria-hidden="true"></i>
        <input type="text" placeholder="Username" id="username" name="user" />
      </div>
      <div class="item">
        <i class="fa fa-key" aria-hidden="true"></i>
        <input type="password" placeholder="Password" id="password" name="key" />
      </div>
      <button>Login</button>

    </div>
    <div id="Register">
      <pre><a href="Untitled-2.html">注册</a></pre>
    </div>
  </div>
</body>
<script>
  let admin = [{
    name: '张三',
    password: '123456'
  }, {
    name: '李四',
    password: '1234567'
  }, {
    name: '张飞',
    password: '12345678'
  }]

  $("button").click(() => {
    //#region 公共的东西
    let loading = false
    let uname = $("#username").val()
    let pwd = $("#password").val()
    let sus = 0; // 登录标识  1代表成功  0代表失败
    //==验证是否输入了用户名==//
    if (!uname || !uname.trim()) {
      alert('请输入用户名')
      return
    }
    //==验证是否输入了密码==//
    if (!pwd || !pwd.trim()) {
      alert('请输入密码')
      return
    }
    //#endregion
    //#region 方法一:适用于没有接口本地测试验证
    let rows = admin.filter(item => {
      return item.name === uname.trim() && item.password === pwd.trim()
    })
    rows && rows.length > 0 ? sus = 1 : sus = 0
    sus === 1 ? alert("登录成功") : alert("登录失败")
    //#endregion
    //#region 方法二:适用于有接口的情况
    //==模拟请求前开始遮罩，并提示登录中==//
    loading = true
    //==开始登录==//
    $.ajax({
      url: '',
      type: 'get',
      data: {
        uname: uname,
        pwd: pwd
      },
      success(data) {
        data ? alert("登录成功") : alert("登录失败")
      },
      error(data) {
        alert("登录失败 原因是：" + data)
      },
      complete(data) {
        //==不管请求是否成功，请求返回值是否正确都关闭遮罩结束登录中的提示==//
        loading = false
      }
    })
    //#endregion
    // $.each(admin, (index, item) => {
    //   if (uname.trim() === item.name && pwd.trim() === item.password) {
    //     sus = 1
    //     return false
    //   }
    // })

  })
  // $("button").click(()=>{
  //   let uname = $(".item:eq(0)").children(":last").val()
  //   let pwd = $(".item:eq(1)").children(":last").val()
  //   let sus = 0 // 判断是否登录成功
  //   $.ajax({
  //     type:'get',
  //     url:'js/data.txt',
  //     data:{},
  //     async:true,
  //     dataType:'json',
  //     success(res){
  //       let obj = JSON.parse(res)  //转换为JSON数据
  //       alert(obj)
  //       $.each(obj,(index,item)=>{
  //         if(uname.trim()===item.name && pwd.trim()===item.password)
  //        { sus = 1 
  //          return false
  //        }
  //       })
  //       if(sus === 1) alert("登录成功")
  //       else alert("登录失败")
  //     },
  //     error(res){
  //       console.log("请求失败")
  //     },
  //     complete(res){
  //       console.log('释放资源')
  //     },
  //   })
  // })
</script>

</html>